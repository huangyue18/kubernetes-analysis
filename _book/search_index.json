{"index":{"version":"0.5.12","fields":[{"name":"title","boost":10},{"name":"keywords","boost":15},{"name":"body","boost":1}],"ref":"url","documentStore":{"store":{"./":["analysi","introduct","kubernet"],"leader-election.html":["\"37362459\"","\"leader","#","$","${pod_name}","'{\"holderidentity\":\"lead","/api/v1/namespaces/default/endpoints/exampl","0","07t06:59:10z","07t07:17:13z\",\"renewtime\":\"2017","1.","1/1","11","11e7","13","1591020587","16t06:36:32z\",\"leadertransitions\":0}'","2.","2017","280b4d20","3.","9418820918cc","95b9","[]","[https://en.wikipedia.org/wiki/leader_election]","[https://github.com/kubernetes/contrib/tree/master/election]","abov","ag","annotations:","apiversion:","c389","candid","command","control","controller，为了保证数据的统一，需要选举出一个","creationtimestamp:","default","elect","election=example​","election。ingress","elector","elector:0.5","endpoint","endpoints：","exampl","f","image=gcr.io/google_containers/lead","ingress","inmr1","inmr1\"","inmr1\",\"leasedurationseconds\":10,\"acquiretime\":\"2017","k8","kind:","kubectl","leader","leader。","log","metadata:","name","name:","namespace:","nginx","o","plane.alpha.kubernetes.io/leader:","pod","qkq00","readi","replicas=3","resourceversion:","restart","run","selflink:","set","sgwcq","statu","status.go","subsets:","uid:","v1","watch","yaml","​","‘example’","…","中会有多个","中得知","中用到了","中的应用","什么是","会","信息，过期重选。保证这几个容器中只有一个","删除这个容器之后，k8s会重启一个新的容器并且重新选举","可以看到","可以看到，每次选举，选举的内容就放在这个叫","可以通过","启动","启动了3个容器：","在","在分布式计算中，从多个节点中选举一个leader","容器：","就是当前的","查看容器日志：","现在","的","的状态，并且生成相应的配置文件。一般","的算法这里就先忽略不谈），有过期时间，每个节点从","进行操作。","通过查看代码","里","集群中","集群中有一个叫","（选举哪个"]},"length":2},"tokenStore":{"root":{"0":{"7":{"docs":{},"t":{"0":{"6":{"docs":{},":":{"5":{"9":{"docs":{},":":{"1":{"0":{"docs":{},"z":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"docs":{}},"docs":{}}},"docs":{}},"docs":{}}},"7":{"docs":{},":":{"1":{"7":{"docs":{},":":{"1":{"3":{"docs":{},"z":{"docs":{},"\"":{"docs":{},",":{"docs":{},"\"":{"docs":{},"r":{"docs":{},"e":{"docs":{},"n":{"docs":{},"e":{"docs":{},"w":{"docs":{},"t":{"docs":{},"i":{"docs":{},"m":{"docs":{},"e":{"docs":{},"\"":{"docs":{},":":{"docs":{},"\"":{"2":{"0":{"1":{"7":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}}}}}}}}}}}}}}}}}},"docs":{}},"docs":{}}},"docs":{}},"docs":{}}},"docs":{}},"docs":{}}},"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.01675977653631285}}},"1":{"1":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.01675977653631285}},"e":{"7":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}}},"3":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.01675977653631285}}},"5":{"9":{"1":{"0":{"2":{"0":{"5":{"8":{"7":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0111731843575419}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"6":{"docs":{},"t":{"0":{"6":{"docs":{},":":{"3":{"6":{"docs":{},":":{"3":{"2":{"docs":{},"z":{"docs":{},"\"":{"docs":{},",":{"docs":{},"\"":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"t":{"docs":{},"r":{"docs":{},"a":{"docs":{},"n":{"docs":{},"s":{"docs":{},"i":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"\"":{"docs":{},":":{"0":{"docs":{},"}":{"docs":{},"'":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"docs":{}}}}}}}}}}}}}}}}}}}}}}}}},"docs":{}},"docs":{}}},"docs":{}},"docs":{}}},"docs":{}},"docs":{}}},"docs":{},".":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"/":{"1":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.01675977653631285}}},"docs":{}}},"2":{"0":{"1":{"7":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}},"8":{"0":{"docs":{},"b":{"4":{"docs":{},"d":{"2":{"0":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}}},"docs":{}}},"docs":{}},"docs":{},".":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"3":{"docs":{},".":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"9":{"4":{"1":{"8":{"8":{"2":{"0":{"9":{"1":{"8":{"docs":{},"c":{"docs":{},"c":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"5":{"docs":{},"b":{"9":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}}},"docs":{}},"docs":{},"a":{"docs":{},"n":{"docs":{},"a":{"docs":{},"l":{"docs":{},"y":{"docs":{},"s":{"docs":{},"i":{"docs":{"./":{"ref":"./","tf":0.5}}}}}}},"n":{"docs":{},"o":{"docs":{},"t":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}},"b":{"docs":{},"o":{"docs":{},"v":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"g":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"p":{"docs":{},"i":{"docs":{},"v":{"docs":{},"e":{"docs":{},"r":{"docs":{},"s":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"o":{"docs":{},"d":{"docs":{},"u":{"docs":{},"c":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":10}}}}}}}}},"g":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"s":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0223463687150838}}}}}}},"m":{"docs":{},"r":{"1":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},"\"":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},",":{"docs":{},"\"":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"s":{"docs":{},"e":{"docs":{},"d":{"docs":{},"u":{"docs":{},"r":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"s":{"docs":{},"e":{"docs":{},"c":{"docs":{},"o":{"docs":{},"n":{"docs":{},"d":{"docs":{},"s":{"docs":{},"\"":{"docs":{},":":{"1":{"0":{"docs":{},",":{"docs":{},"\"":{"docs":{},"a":{"docs":{},"c":{"docs":{},"q":{"docs":{},"u":{"docs":{},"i":{"docs":{},"r":{"docs":{},"e":{"docs":{},"t":{"docs":{},"i":{"docs":{},"m":{"docs":{},"e":{"docs":{},"\"":{"docs":{},":":{"docs":{},"\"":{"2":{"0":{"1":{"7":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}}}}}}}}}}}}}}}}}},"docs":{}},"docs":{}}}}}}}}}}}}}}}}}}}}}}}}}}},"docs":{}}}},"m":{"docs":{},"a":{"docs":{},"g":{"docs":{},"e":{"docs":{},"=":{"docs":{},"g":{"docs":{},"c":{"docs":{},"r":{"docs":{},".":{"docs":{},"i":{"docs":{},"o":{"docs":{},"/":{"docs":{},"g":{"docs":{},"o":{"docs":{},"o":{"docs":{},"g":{"docs":{},"l":{"docs":{},"e":{"docs":{},"_":{"docs":{},"c":{"docs":{},"o":{"docs":{},"n":{"docs":{},"t":{"docs":{},"a":{"docs":{},"i":{"docs":{},"n":{"docs":{},"e":{"docs":{},"r":{"docs":{},"s":{"docs":{},"/":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"k":{"8":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0223463687150838}}},"docs":{},"u":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"n":{"docs":{},"e":{"docs":{},"t":{"docs":{"./":{"ref":"./","tf":0.5}}}}}},"c":{"docs":{},"t":{"docs":{},"l":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0335195530726257}}}}}}}},"i":{"docs":{},"n":{"docs":{},"d":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"\"":{"3":{"7":{"3":{"6":{"2":{"4":{"5":{"9":{"docs":{},"\"":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{}},"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}},"#":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"$":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0223463687150838}},"{":{"docs":{},"p":{"docs":{},"o":{"docs":{},"d":{"docs":{},"_":{"docs":{},"n":{"docs":{},"a":{"docs":{},"m":{"docs":{},"e":{"docs":{},"}":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}},"'":{"docs":{},"{":{"docs":{},"\"":{"docs":{},"h":{"docs":{},"o":{"docs":{},"l":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"i":{"docs":{},"d":{"docs":{},"e":{"docs":{},"n":{"docs":{},"t":{"docs":{},"i":{"docs":{},"t":{"docs":{},"y":{"docs":{},"\"":{"docs":{},":":{"docs":{},"\"":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}},"/":{"docs":{},"a":{"docs":{},"p":{"docs":{},"i":{"docs":{},"/":{"docs":{},"v":{"1":{"docs":{},"/":{"docs":{},"n":{"docs":{},"a":{"docs":{},"m":{"docs":{},"e":{"docs":{},"s":{"docs":{},"p":{"docs":{},"a":{"docs":{},"c":{"docs":{},"e":{"docs":{},"s":{"docs":{},"/":{"docs":{},"d":{"docs":{},"e":{"docs":{},"f":{"docs":{},"a":{"docs":{},"u":{"docs":{},"l":{"docs":{},"t":{"docs":{},"/":{"docs":{},"e":{"docs":{},"n":{"docs":{},"d":{"docs":{},"p":{"docs":{},"o":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{},"s":{"docs":{},"/":{"docs":{},"e":{"docs":{},"x":{"docs":{},"a":{"docs":{},"m":{"docs":{},"p":{"docs":{},"l":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"docs":{}}}}}}},"[":{"docs":{},"]":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"h":{"docs":{},"t":{"docs":{},"t":{"docs":{},"p":{"docs":{},"s":{"docs":{},":":{"docs":{},"/":{"docs":{},"/":{"docs":{},"e":{"docs":{},"n":{"docs":{},".":{"docs":{},"w":{"docs":{},"i":{"docs":{},"k":{"docs":{},"i":{"docs":{},"p":{"docs":{},"e":{"docs":{},"d":{"docs":{},"i":{"docs":{},"a":{"docs":{},".":{"docs":{},"o":{"docs":{},"r":{"docs":{},"g":{"docs":{},"/":{"docs":{},"w":{"docs":{},"i":{"docs":{},"k":{"docs":{},"i":{"docs":{},"/":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},"_":{"docs":{},"e":{"docs":{},"l":{"docs":{},"e":{"docs":{},"c":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"]":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"g":{"docs":{},"i":{"docs":{},"t":{"docs":{},"h":{"docs":{},"u":{"docs":{},"b":{"docs":{},".":{"docs":{},"c":{"docs":{},"o":{"docs":{},"m":{"docs":{},"/":{"docs":{},"k":{"docs":{},"u":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"n":{"docs":{},"e":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},"/":{"docs":{},"c":{"docs":{},"o":{"docs":{},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"i":{"docs":{},"b":{"docs":{},"/":{"docs":{},"t":{"docs":{},"r":{"docs":{},"e":{"docs":{},"e":{"docs":{},"/":{"docs":{},"m":{"docs":{},"a":{"docs":{},"s":{"docs":{},"t":{"docs":{},"e":{"docs":{},"r":{"docs":{},"/":{"docs":{},"e":{"docs":{},"l":{"docs":{},"e":{"docs":{},"c":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"]":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"c":{"3":{"8":{"9":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}},"docs":{},"a":{"docs":{},"n":{"docs":{},"d":{"docs":{},"i":{"docs":{},"d":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"o":{"docs":{},"m":{"docs":{},"m":{"docs":{},"a":{"docs":{},"n":{"docs":{},"d":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"n":{"docs":{},"t":{"docs":{},"r":{"docs":{},"o":{"docs":{},"l":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0223463687150838}},"l":{"docs":{},"e":{"docs":{},"r":{"docs":{},"，":{"docs":{},"为":{"docs":{},"了":{"docs":{},"保":{"docs":{},"证":{"docs":{},"数":{"docs":{},"据":{"docs":{},"的":{"docs":{},"统":{"docs":{},"一":{"docs":{},"，":{"docs":{},"需":{"docs":{},"要":{"docs":{},"选":{"docs":{},"举":{"docs":{},"出":{"docs":{},"一":{"docs":{},"个":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"r":{"docs":{},"e":{"docs":{},"a":{"docs":{},"t":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"t":{"docs":{},"i":{"docs":{},"m":{"docs":{},"e":{"docs":{},"s":{"docs":{},"t":{"docs":{},"a":{"docs":{},"m":{"docs":{},"p":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}},"d":{"docs":{},"e":{"docs":{},"f":{"docs":{},"a":{"docs":{},"u":{"docs":{},"l":{"docs":{},"t":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}},"e":{"docs":{},"l":{"docs":{},"e":{"docs":{},"c":{"docs":{},"t":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":5.022346368715084}},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},"=":{"docs":{},"e":{"docs":{},"x":{"docs":{},"a":{"docs":{},"m":{"docs":{},"p":{"docs":{},"l":{"docs":{},"e":{"docs":{},"​":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}},"。":{"docs":{},"i":{"docs":{},"n":{"docs":{},"g":{"docs":{},"r":{"docs":{},"e":{"docs":{},"s":{"docs":{},"s":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}},"o":{"docs":{},"r":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.03910614525139665}},":":{"0":{"docs":{},".":{"5":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}}},"docs":{}}}}}}}},"n":{"docs":{},"d":{"docs":{},"p":{"docs":{},"o":{"docs":{},"i":{"docs":{},"n":{"docs":{},"t":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.01675977653631285}},"s":{"docs":{},"：":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}},"x":{"docs":{},"a":{"docs":{},"m":{"docs":{},"p":{"docs":{},"l":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0335195530726257}}}}}}}},"f":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":5.083798882681564}},"。":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}},"o":{"docs":{},"g":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0111731843575419}}}}},"m":{"docs":{},"e":{"docs":{},"t":{"docs":{},"a":{"docs":{},"d":{"docs":{},"a":{"docs":{},"t":{"docs":{},"a":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}},"n":{"docs":{},"a":{"docs":{},"m":{"docs":{},"e":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0111731843575419}},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"s":{"docs":{},"p":{"docs":{},"a":{"docs":{},"c":{"docs":{},"e":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}},"g":{"docs":{},"i":{"docs":{},"n":{"docs":{},"x":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0223463687150838}}}}}}},"o":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"p":{"docs":{},"l":{"docs":{},"a":{"docs":{},"n":{"docs":{},"e":{"docs":{},".":{"docs":{},"a":{"docs":{},"l":{"docs":{},"p":{"docs":{},"h":{"docs":{},"a":{"docs":{},".":{"docs":{},"k":{"docs":{},"u":{"docs":{},"b":{"docs":{},"e":{"docs":{},"r":{"docs":{},"n":{"docs":{},"e":{"docs":{},"t":{"docs":{},"e":{"docs":{},"s":{"docs":{},".":{"docs":{},"i":{"docs":{},"o":{"docs":{},"/":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},"o":{"docs":{},"d":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"q":{"docs":{},"k":{"docs":{},"q":{"0":{"0":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"docs":{}}}},"r":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"i":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"p":{"docs":{},"l":{"docs":{},"i":{"docs":{},"c":{"docs":{},"a":{"docs":{},"s":{"docs":{},"=":{"3":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}}}}}}}},"s":{"docs":{},"o":{"docs":{},"u":{"docs":{},"r":{"docs":{},"c":{"docs":{},"e":{"docs":{},"v":{"docs":{},"e":{"docs":{},"r":{"docs":{},"s":{"docs":{},"i":{"docs":{},"o":{"docs":{},"n":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}},"t":{"docs":{},"a":{"docs":{},"r":{"docs":{},"t":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}},"u":{"docs":{},"n":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.027932960893854747}}}}},"s":{"docs":{},"e":{"docs":{},"l":{"docs":{},"f":{"docs":{},"l":{"docs":{},"i":{"docs":{},"n":{"docs":{},"k":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}},"t":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"g":{"docs":{},"w":{"docs":{},"c":{"docs":{},"q":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"t":{"docs":{},"a":{"docs":{},"t":{"docs":{},"u":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},"s":{"docs":{},".":{"docs":{},"g":{"docs":{},"o":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}},"u":{"docs":{},"b":{"docs":{},"s":{"docs":{},"e":{"docs":{},"t":{"docs":{},"s":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}},"u":{"docs":{},"i":{"docs":{},"d":{"docs":{},":":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"v":{"1":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"docs":{}},"w":{"docs":{},"a":{"docs":{},"t":{"docs":{},"c":{"docs":{},"h":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"y":{"docs":{},"a":{"docs":{},"m":{"docs":{},"l":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"​":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"‘":{"docs":{},"e":{"docs":{},"x":{"docs":{},"a":{"docs":{},"m":{"docs":{},"p":{"docs":{},"l":{"docs":{},"e":{"docs":{},"’":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}},"…":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"中":{"docs":{},"会":{"docs":{},"有":{"docs":{},"多":{"docs":{},"个":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"得":{"docs":{},"知":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"用":{"docs":{},"到":{"docs":{},"了":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"的":{"docs":{},"应":{"docs":{},"用":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"什":{"docs":{},"么":{"docs":{},"是":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"会":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"信":{"docs":{},"息":{"docs":{},"，":{"docs":{},"过":{"docs":{},"期":{"docs":{},"重":{"docs":{},"选":{"docs":{},"。":{"docs":{},"保":{"docs":{},"证":{"docs":{},"这":{"docs":{},"几":{"docs":{},"个":{"docs":{},"容":{"docs":{},"器":{"docs":{},"中":{"docs":{},"只":{"docs":{},"有":{"docs":{},"一":{"docs":{},"个":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}},"删":{"docs":{},"除":{"docs":{},"这":{"docs":{},"个":{"docs":{},"容":{"docs":{},"器":{"docs":{},"之":{"docs":{},"后":{"docs":{},"，":{"docs":{},"k":{"8":{"docs":{},"s":{"docs":{},"会":{"docs":{},"重":{"docs":{},"启":{"docs":{},"一":{"docs":{},"个":{"docs":{},"新":{"docs":{},"的":{"docs":{},"容":{"docs":{},"器":{"docs":{},"并":{"docs":{},"且":{"docs":{},"重":{"docs":{},"新":{"docs":{},"选":{"docs":{},"举":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}},"docs":{}}}}}}}}}}},"可":{"docs":{},"以":{"docs":{},"看":{"docs":{},"到":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},"，":{"docs":{},"每":{"docs":{},"次":{"docs":{},"选":{"docs":{},"举":{"docs":{},"，":{"docs":{},"选":{"docs":{},"举":{"docs":{},"的":{"docs":{},"内":{"docs":{},"容":{"docs":{},"就":{"docs":{},"放":{"docs":{},"在":{"docs":{},"这":{"docs":{},"个":{"docs":{},"叫":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}},"通":{"docs":{},"过":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}},"启":{"docs":{},"动":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},"了":{"3":{"docs":{},"个":{"docs":{},"容":{"docs":{},"器":{"docs":{},"：":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"docs":{}}}},"在":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0111731843575419}},"分":{"docs":{},"布":{"docs":{},"式":{"docs":{},"计":{"docs":{},"算":{"docs":{},"中":{"docs":{},"，":{"docs":{},"从":{"docs":{},"多":{"docs":{},"个":{"docs":{},"节":{"docs":{},"点":{"docs":{},"中":{"docs":{},"选":{"docs":{},"举":{"docs":{},"一":{"docs":{},"个":{"docs":{},"l":{"docs":{},"e":{"docs":{},"a":{"docs":{},"d":{"docs":{},"e":{"docs":{},"r":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}},"容":{"docs":{},"器":{"docs":{},"：":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}},"就":{"docs":{},"是":{"docs":{},"当":{"docs":{},"前":{"docs":{},"的":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"查":{"docs":{},"看":{"docs":{},"容":{"docs":{},"器":{"docs":{},"日":{"docs":{},"志":{"docs":{},"：":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}},"现":{"docs":{},"在":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}},"的":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.0111731843575419}},"状":{"docs":{},"态":{"docs":{},"，":{"docs":{},"并":{"docs":{},"且":{"docs":{},"生":{"docs":{},"成":{"docs":{},"相":{"docs":{},"应":{"docs":{},"的":{"docs":{},"配":{"docs":{},"置":{"docs":{},"文":{"docs":{},"件":{"docs":{},"。":{"docs":{},"一":{"docs":{},"般":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}},"算":{"docs":{},"法":{"docs":{},"这":{"docs":{},"里":{"docs":{},"就":{"docs":{},"先":{"docs":{},"忽":{"docs":{},"略":{"docs":{},"不":{"docs":{},"谈":{"docs":{},"）":{"docs":{},"，":{"docs":{},"有":{"docs":{},"过":{"docs":{},"期":{"docs":{},"时":{"docs":{},"间":{"docs":{},"，":{"docs":{},"每":{"docs":{},"个":{"docs":{},"节":{"docs":{},"点":{"docs":{},"从":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}}}}}}}}}}}}}}}}}}},"进":{"docs":{},"行":{"docs":{},"操":{"docs":{},"作":{"docs":{},"。":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}},"通":{"docs":{},"过":{"docs":{},"查":{"docs":{},"看":{"docs":{},"代":{"docs":{},"码":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}},"里":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}},"集":{"docs":{},"群":{"docs":{},"中":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}},"有":{"docs":{},"一":{"docs":{},"个":{"docs":{},"叫":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}}},"（":{"docs":{},"选":{"docs":{},"举":{"docs":{},"哪":{"docs":{},"个":{"docs":{"leader-election.html":{"ref":"leader-election.html","tf":0.00558659217877095}}}}}}}},"length":115},"corpusTokens":["\"37362459\"","\"leader","#","$","${pod_name}","'{\"holderidentity\":\"lead","/api/v1/namespaces/default/endpoints/exampl","0","07t06:59:10z","07t07:17:13z\",\"renewtime\":\"2017","1.","1/1","11","11e7","13","1591020587","16t06:36:32z\",\"leadertransitions\":0}'","2.","2017","280b4d20","3.","9418820918cc","95b9","[]","[https://en.wikipedia.org/wiki/leader_election]","[https://github.com/kubernetes/contrib/tree/master/election]","abov","ag","analysi","annotations:","apiversion:","c389","candid","command","control","controller，为了保证数据的统一，需要选举出一个","creationtimestamp:","default","elect","election=example​","election。ingress","elector","elector:0.5","endpoint","endpoints：","exampl","f","image=gcr.io/google_containers/lead","ingress","inmr1","inmr1\"","inmr1\",\"leasedurationseconds\":10,\"acquiretime\":\"2017","introduct","k8","kind:","kubectl","kubernet","leader","leader。","log","metadata:","name","name:","namespace:","nginx","o","plane.alpha.kubernetes.io/leader:","pod","qkq00","readi","replicas=3","resourceversion:","restart","run","selflink:","set","sgwcq","statu","status.go","subsets:","uid:","v1","watch","yaml","​","‘example’","…","中会有多个","中得知","中用到了","中的应用","什么是","会","信息，过期重选。保证这几个容器中只有一个","删除这个容器之后，k8s会重启一个新的容器并且重新选举","可以看到","可以看到，每次选举，选举的内容就放在这个叫","可以通过","启动","启动了3个容器：","在","在分布式计算中，从多个节点中选举一个leader","容器：","就是当前的","查看容器日志：","现在","的","的状态，并且生成相应的配置文件。一般","的算法这里就先忽略不谈），有过期时间，每个节点从","进行操作。","通过查看代码","里","集群中","集群中有一个叫","（选举哪个"],"pipeline":["stopWordFilter","stemmer"]},"store":{"./":{"url":"./","title":"Introduction","keywords":"","body":"kubernetes-analysis\n"},"leader-election.html":{"url":"leader-election.html","title":"leader election","keywords":"","body":"leader election\n1. 什么是 leader election\n在分布式计算中，从多个节点中选举一个leader\n[https://en.wikipedia.org/wiki/Leader_election]\n2. leader election example\n启动 leader elector 容器：\n$ kubectl run leader-elector --image=gcr.io/google_containers/leader-elector:0.5 --replicas=3 -- --election=example​\n\nk8s 启动了3个容器：\n$ kubectl get pods\nNAME                   READY     STATUS    RESTARTS   AGE\nleader-elector-inmr1   1/1       Running   0          13s\nleader-elector-qkq00   1/1       Running   0          13s\nleader-elector-sgwcq   1/1       Running   0          13s\n可以通过 kubectl logs 查看容器日志：\n$ kubectl logs -f ${pod_name}\n现在 k8s 集群中有一个叫 example 的 endpoints：\n# ‘example’ is the name of the candidate set from the above kubectl run … command\n$ kubectl get endpoints example -o yaml\napiVersion: v1\nkind: Endpoints\nmetadata:\n  annotations:\n    control-plane.alpha.kubernetes.io/leader: '{\"holderIdentity\":\"leader-elector-1591020587-inmr1\",\"leaseDurationSeconds\":10,\"acquireTime\":\"2017-11-07T07:17:13Z\",\"renewTime\":\"2017-11-16T06:36:32Z\",\"leaderTransitions\":0}'\n  creationTimestamp: 2017-11-07T06:59:10Z\n  name: example\n  namespace: default\n  resourceVersion: \"37362459\"\n  selfLink: /api/v1/namespaces/default/endpoints/example\n  uid: 280b4d20-c389-11e7-95b9-9418820918cc\nsubsets: []\n​\n可以看到 \"leader-elector-1591020587-inmr1\" 就是当前的 leader\n删除这个容器之后，k8s会重启一个新的容器并且重新选举 leader\n通过查看代码 [https://github.com/kubernetes/contrib/tree/master/election] 可以看到，每次选举，选举的内容就放在这个叫 example 的 endpoints 里 （选举哪个 leader 的算法这里就先忽略不谈），有过期时间，每个节点从 example 中得知 leader 信息，过期重选。保证这几个容器中只有一个 leader。\n3. leader election 在 ingress-nginx-controller 中的应用\ningress-nginx-controller 在 status.go 中用到了 leader election。ingress-nginx-controller 会 watch k8s 集群中 ingress 的状态，并且生成相应的配置文件。一般 k8s 中会有多个 ingress-nginx-controller，为了保证数据的统一，需要选举出一个 leader 进行操作。\n"}}}